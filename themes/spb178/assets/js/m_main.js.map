{"version":3,"names":[],"mappings":"","sources":["m_main.js"],"sourcesContent":["var mySwiper = new Swiper('.swiper-container', {\r\n\tnavigation: {\r\n\t\tnextEl: '.swiper-button-next',\r\n\t\tprevEl: '.swiper-button-prev',\r\n\t},\r\n\tpagination: {\r\n\t\tel: '.swiper-pagination',\r\n\t\tclickable: true,\r\n\t},\r\n\t// Optional parameters\r\n\tslidesPerView: 1,\r\n\tspeed: 800,\r\n\tloop: true\r\n});\r\n\r\nlet headerBtn = document.getElementById('header-btn'),\r\n\tmodalW = document.getElementById('modalW'),\r\n\theader = document.querySelector('.header'),\r\n\thtml = document.getElementsByTagName('html')[0];\r\n\r\nheaderBtn.addEventListener('click', function(){\r\n\theaderBtn.classList.toggle('active'),\r\n\tmodalW.classList.toggle('active'),\r\n\theader.classList.toggle('active'),\r\n\thtml.classList.toggle('overflowY');\r\n} ); \r\n\r\n$('img.svg').each(function () {\r\n\tvar $img = $(this);\r\n\tvar imgID = $img.attr('id');\r\n\tvar imgClass = $img.attr('class');\r\n\tvar imgURL = $img.attr('src');\r\n\r\n\t$.get(imgURL, function (data) {\r\n\t\t// Get the SVG tag, ignore the rest\r\n\t\tvar $svg = $(data).find('svg');\r\n\r\n\t\t// Add replaced image's ID to the new SVG\r\n\t\tif (typeof imgID !== 'undefined') {\r\n\t\t\t$svg = $svg.attr('id', imgID);\r\n\t\t}\r\n\t\t// Add replaced image's classes to the new SVG\r\n\t\tif (typeof imgClass !== 'undefined') {\r\n\t\t\t$svg = $svg.attr('class', imgClass + ' r-svg');\r\n\t\t}\r\n\r\n\t\t// Remove any invalid XML tags as per http://validator.w3.org\r\n\t\t$svg = $svg.removeAttr('xmlns:a');\r\n\r\n\t\t// Replace image with new SVG\r\n\t\t$img.replaceWith($svg);\r\n\r\n\t}, 'xml');\r\n});\r\n\r\n$('.connect-to-team').on(\"click\", \"#connect-to-team-btn\", function () {\r\n\tvar phone;\r\n\tvar e = $(this).closest(\".forma\");\r\n\tbtn = $(this);\r\n\tp_btn = btn.find(\"p\");\r\n\tname = e.find('input[name=\"name\"]').val();\r\n\tmail = e.find('input[name=\"mail\"]').val();\r\n\tphone_el = e.find('input[name=\"phone\"]');\r\n\tphone = phone_el.val();\r\n\tch = \"Ценральная форма\\n\";\r\n\tif (phone.length < 18) {\r\n\t\tphone_el.addClass(\"invalid_phone\");\r\n\t\tphone = phone_el.val(); //проверка\r\n\t\tphone_el.val('Введите номер корректно');\r\n\t\tphone_el.css('color', 'red');\r\n\t\tconsole.log(phone);\r\n\t\tbtn.prop(\"disabled\", true);\r\n\t\tsetTimeout(function () {\r\n\t\t\tphone_el.removeClass(\"invalid_phone\");\r\n\t\t\tphone_el.val(phone);\r\n\t\t\tphone_el.css('color', 'black');\r\n\t\t\tbtn.prop(\"disabled\", false);\r\n\t\t}, 2000)\r\n\t}\r\n\telse {\r\n\t\t$.ajax({\r\n\t\t\turl: \"/api/new.php\",\r\n\t\t\ttype: \"post\",\r\n\t\t\tdataType: \"json\",\r\n\t\t\tdata: {\r\n\t\t\t\tname: name,\r\n\t\t\t\tphone: phone,\r\n\t\t\t\tmail: mail,\r\n\t\t\t\tch: ch\r\n\t\t\t},\r\n\t\t\tbeforeSend: function () {\r\n\t\t\t\tp_btn.html(\"Идёт отправка...\")\r\n\t\t\t},\r\n\t\t\tsuccess: function () {\r\n\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\tp_btn.text(\"Отправлено! :)\");\r\n\t\t\t\t\tbtn.prop(\"disabled\", false);\r\n\t\t\t\t\te.find('input[name=\"name\"]').val('');\r\n\t\t\t\t\te.find('input[name=\"phone\"]').val('');\r\n\t\t\t\t\te.find('input[name=\"mail\"]').val('');\r\n\t\t\t\t\tsetTimeout(function () {\r\n\t\t\t\t\t\tp_btn.html(\"Присоединиться к команде\");\r\n\t\t\t\t\t}, 1200);\r\n\t\t\t\t}, 1200);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n});\r\n\r\n/* Mask for Phone */\r\n$(document).on(\"ready\", function () {\r\n\t[].forEach.call(document.querySelectorAll('input[name=\"phone\"]'), function (input) {\r\n\t\tvar keyCode;\r\n\t\tfunction mask(event) {\r\n\t\t\tevent.keyCode && (keyCode = event.keyCode);\r\n\t\t\tvar pos = this.selectionStart;\r\n\t\t\tif (pos < 3) event.preventDefault();\r\n\t\t\tvar matrix = \"+7 (___) ___-__-__\",\r\n\t\t\t\ti = 0,\r\n\t\t\t\tdef = matrix.replace(/\\D/g, \"\"),\r\n\t\t\t\tval = this.value.replace(/\\D/g, \"\"),\r\n\t\t\t\tnew_value = matrix.replace(/[_\\d]/g, function (a) {\r\n\t\t\t\t\treturn i < val.length ? val.charAt(i++) || def.charAt(i) : a\r\n\t\t\t\t});\r\n\t\t\ti = new_value.indexOf(\"_\");\r\n\t\t\tif (i != -1) {\r\n\t\t\t\ti < 5 && (i = 3);\r\n\t\t\t\tnew_value = new_value.slice(0, i)\r\n\t\t\t}\r\n\t\t\tvar reg = matrix.substr(0, this.value.length).replace(/_+/g,\r\n\t\t\t\tfunction (a) {\r\n\t\t\t\t\treturn \"\\\\d{1,\" + a.length + \"}\"\r\n\t\t\t\t}).replace(/[+()]/g, \"\\\\$&\");\r\n\t\t\treg = new RegExp(\"^\" + reg + \"$\");\r\n\t\t\tif (!reg.test(this.value) || this.value.length < 5 || keyCode > 47 && keyCode < 58) this.value = new_value;\r\n\t\t\tif (event.type == \"blur\" && this.value.length < 5) this.value = \"\"\r\n\t\t}\r\n\t\tinput.addEventListener(\"input\", mask, false);\r\n\t\tinput.addEventListener(\"focus\", mask, false);\r\n\t\tinput.addEventListener(\"blur\", mask, false);\r\n\t\t// input.addEventListener(\"keydown\", mask, false)\r\n\t});\r\n});"],"file":"m_main.js"}